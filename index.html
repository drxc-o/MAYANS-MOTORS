<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="G√©n√©rateur de factures Mayans Motors">
    <title>Facture Mayans Motors - G√©n√©rateur PNG</title>
    
    <link rel="stylesheet" href="styles.css">
    
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</head>
<body>

    <button class="btn-print" onclick="downloadPNG()">üíæ T√©l√©charger en PNG</button>

    <div class="controls" id="control-panel">
        <div class="config-header">
            <div class="config-title">
                <span class="config-icon">üèçÔ∏è</span>
                <h3>Configurateur Mayans Motors</h3>
            </div>
            <div class="vehicle-counter">
                <span id="vehicle-count">0</span><span class="counter-max">/5</span>
                <span class="counter-label">v√©hicules</span>
            </div>
        </div>

        <div class="config-section">
            <div class="section-title">
                <span class="step-badge">1</span>
                <span>S√©lectionner un v√©hicule</span>
            </div>
            
            <div class="search-container">
                <input type="text" id="search-input" class="search-box" placeholder="üîç Rechercher une marque ou un mod√®le...">
            </div>

            <div class="selection-steps">
                <div class="step-container" id="brands-step">
                    <div class="step-header">
                        <span class="step-number">1</span>
                        <span class="step-label">Choisissez une marque</span>
                    </div>
                    <div class="brands-grid" id="brands-grid">
                    </div>
                </div>

                <div class="step-container" id="models-step" style="display: none;">
                    <div class="step-header">
                        <span class="step-number">2</span>
                        <span class="step-label">Choisissez un mod√®le</span>
                        <button class="btn-back" onclick="resetSelection()">‚Üê Retour aux marques</button>
                    </div>
                    <div class="models-grid" id="models-grid">
                    </div>
                </div>
            </div>
        </div>

        <div class="config-section">
            <div class="section-title">
                <span class="step-badge">2</span>
                <span>Informations de la facture</span>
            </div>
            <div class="invoice-info-grid">
                <div class="input-group">
                    <label for="seller-sig-input">
                        <span class="label-icon">üë§</span>
                        Vendeur
                    </label>
                    <input type="text" id="seller-sig-input" class="modern-input" placeholder="Nom du vendeur..." oninput="updateSig()">
                </div>
                <div class="input-group">
                    <label for="date-input">
                        <span class="label-icon">üìÖ</span>
                        Date
                    </label>
                    <input type="date" id="date-input" class="modern-input" onchange="updateDate()">
                </div>
            </div>
        </div>

        <div class="progress-indicator">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <span class="progress-text" id="progress-text">Commencez par ajouter un v√©hicule</span>
        </div>
    </div>

    <div class="page" id="invoice-page">
        <div class="top-bar">WASHINGTON</div>

        <div class="content">
            <header>
                <div class="brand-box">
                    <div class="logo-icon">üèçÔ∏è</div>
                    <div class="brand-text">
                        <h1>MAYANS MOTORS</h1>
                        <p class="brand-tagline">Excellence en m√©canique ‚Ä¢ Washington</p>
                    </div>
                </div>
                <div class="invoice-details">
                    <h2 class="invoice-title">üìÑ FACTURE</h2>
                    <div class="invoice-badge">
                        <div class="ref-number" id="ref-display">INV-????</div>
                        <div class="date-display" id="display-date">Date : --/--/----</div>
                    </div>
                </div>
            </header>

            <div class="info-section">
                <div class="info-col">
                    <h3><span class="section-icon">üè¢</span> Vendeur</h3>
                    <div class="input-line">
                        <input type="text" class="clean-input" value="Mayans Motors Dealership" style="font-weight:bold" readonly>
                    </div>
                    <div class="input-line">
                        <span class="input-label">Vendeur :</span>
                        <input type="text" class="clean-input" placeholder="Pr√©nom Nom">
                    </div>
                    <div class="input-line">
                        <span class="input-label">Lieu :</span>
                        <input type="text" class="clean-input" value="Quartier G√©n√©ral / Garage">
                    </div>
                </div>

                <div class="info-col">
                    <h3><span class="section-icon">üë§</span> Client</h3>
                    <div class="input-line">
                        <span class="input-label">Nom :</span>
                        <input type="text" id="client-name-input" class="clean-input" placeholder="Nom de famille" oninput="updateClientSig()">
                    </div>
                    <div class="input-line">
                        <span class="input-label">Pr√©nom :</span>
                        <input type="text" class="clean-input" placeholder="Pr√©nom">
                    </div>
                    <div class="input-line">
                        <span class="input-label">T√©l :</span>
                        <input type="text" class="clean-input" placeholder="555-...">
                    </div>
                </div>
            </div>

            <div class="vehicle-container">
                <div class="vehicle-header-title">
                    <span class="vehicle-icon">üèçÔ∏è</span>
                    <span>V√©hicules command√©s</span>
                </div>
                <table class="vehicle-table">
                    <thead>
                        <tr>
                            <th style="width: 20%">MARQUE</th>
                            <th style="width: 35%">MOD√àLE</th>
                            <th style="width: 10%; text-align: center;">QT√â</th>
                            <th class="col-price">PRIX UNITAIRE</th>
                            <th class="col-price">TOTAL</th>
                            <th class="col-action"></th>
                        </tr>
                    </thead>
                    <tbody id="invoice-items">
                    </tbody>
                </table>
            </div>

            <div class="bottom-section">
                
                <div class="terms-box">
                    <span class="terms-title">Conditions G√©n√©rales de Vente</span>
                    L'acheteur certifie avoir pris connaissance de l'√©tat du v√©hicule lors de la vente. Le v√©hicule est vendu "en l'√©tat", sans garantie moteur apr√®s sortie du garage, sauf mention contraire √©crite. 
                    Toute modification ult√©rieure effectu√©e par un tiers annule toute responsabilit√© du Mayans Motors. 
                    Le paiement est exigible imm√©diatement √† la signature. Les v√©hicules ne sont ni repris ni √©chang√©s une fois la transaction valid√©e par les autorit√©s de Washington.
                </div>

                <table class="calc-table">
                    <tr>
                        <td class="calc-label">Sous-total V√©hicules</td>
                        <td style="width:130px; font-weight:bold; font-family:'Oswald'; color:var(--mayan-green); text-align:right; padding-right:15px;" id="vehicles-subtotal">0 $</td>
                    </tr>
                    <tr>
                        <td class="calc-label" style="color:var(--mayan-red)">Remise Commerciale (-)</td>
                        <td style="text-align:right"><input type="number" id="discount-price" class="calc-input" value="0" style="color:var(--mayan-red)" oninput="calcTotal()"> $</td>
                    </tr>
                    <tr class="total-row">
                        <td class="total-label">NET √Ä PAYER</td>
                        <td class="total-amount" id="final-total">0 $</td>
                    </tr>
                </table>

                <div class="payment-section">
                    <strong>Mode de r√®glement :</strong> 
                    <label class="checkbox-label">
                        <input type="checkbox" class="checkbox-input"> Esp√®ces
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" class="checkbox-input"> Virement Bancaire
                    </label>
                </div>

                <div class="signatures">
                    <div class="sig-box">
                        <div class="sig-title">Pour Mayans Motors</div>
                        <div class="sig-line" id="sig-display"></div>
                    </div>
                    <div class="sig-box">
                        <div class="sig-title">Signature Client</div>
                        <div class="sig-line" id="client-sig-display"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="bottom-bar"></div>
    </div>

    <script src="script.js"></script>
</body>
</html>
